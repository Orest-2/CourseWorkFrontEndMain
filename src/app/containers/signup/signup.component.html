<div class="container-fluid">
  <div class="row no-gutter">
    <div class="d-none d-md-flex col-md-4 col-lg-6 bg-image"></div>
    <div class="col-md-8 col-lg-6">
      <div class="auth d-flex align-items-center py-5">
        <div class="container">
          <p-toast></p-toast>

          <div *ngIf="isLoading$ | async" class="row justify-content-center">
            <div
              class="spinner-grow text-primary"
              style="width: 6rem; height: 6rem;"
              role="status"
            >
              <span class="sr-only">Loading...</span>
            </div>
          </div>

          <div class="row">
            <div *ngIf="!(isLoading$ | async)" class="col-md-9 col-lg-8 mx-auto">
              <h2 class="auth-heading mb-5 text-center">Create an Account!</h2>

              <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
                <div class="form-label-group">
                  <input
                    id="inputEmail"
                    formControlName="login"
                    [ngClass]="{ 'border-danger': isFieldValid('login') }"
                    class="form-control"
                    placeholder="Email address"
                  />
                  <label for="inputEmail">Email address</label>

                  <div class="mt-2 ml-4" *ngIf="isFieldValid('login')">
                    <div class="text-danger" *ngIf="form['login'].errors.required">
                      Field is required.
                    </div>
                    <div class="text-danger" *ngIf="form['login'].errors.email">
                      Please enter a valid email address.
                    </div>
                  </div>
                </div>

                <div class="form-label-group">
                  <input
                    type="password"
                    id="inputPassword"
                    [ngClass]="{ 'border-danger': isFieldValid('password') }"
                    formControlName="password"
                    class="form-control"
                    placeholder="Password"
                  />
                  <label for="inputPassword">Password</label>

                  <div class="mt-2 ml-4" *ngIf="isFieldValid('password')">
                    <div
                      class="text-danger"
                      *ngIf="form['password'].errors.required"
                    >
                      Field is required.
                    </div>
                    <div
                      class="text-danger"
                      *ngIf="form['password'].errors.minlength"
                    >
                      Min length
                      {{ form['password'].errors.minlength.requiredLength }}
                      characters
                    </div>
                  </div>
                </div>

                <div class="form-label-group">
                  <input
                    type="password"
                    id="repeatPassword"
                    [ngClass]="{
                      'border-danger': isFieldValid('passwordConfirmation')
                    }"
                    formControlName="passwordConfirmation"
                    class="form-control"
                    placeholder="Repeat Password"
                  />
                  <label for="repeatPassword">Repeat Password</label>

                  <div
                    class="mt-2 ml-4"
                    *ngIf="isFieldValid('passwordConfirmation')"
                  >
                    <div
                      class="text-danger"
                      *ngIf="form['passwordConfirmation'].errors.required"
                    >
                      Field is required.
                    </div>
                    <div
                      class="text-danger"
                      *ngIf="form['passwordConfirmation'].errors.minlength"
                    >
                      Min length
                      {{
                        form['passwordConfirmation'].errors.minlength.requiredLength
                      }}
                      characters
                    </div>
                    <div
                      class="text-danger"
                      *ngIf="form['passwordConfirmation'].errors.mustMatch"
                    >
                      Passwords must match
                    </div>
                  </div>
                </div>

                <button
                  class="btn btn-lg btn-primary btn-block btn-auth text-uppercase font-weight-bold mb-2"
                  type="submit"
                >
                  Sign up
                </button>

                <hr />

                <div class="text-center">
                  <a
                    class="small"
                    [routerLink]="['/auth/reset_password']"
                    routerLinkActive="active"
                    >Forgot password?</a
                  >
                </div>

                <div class="text-center">
                  <a
                    class="small"
                    [routerLink]="['/auth/sign_in']"
                    routerLinkActive="active"
                    >Already have an account? Login!</a
                  >
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
